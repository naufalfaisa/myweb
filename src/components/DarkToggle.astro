<div class="fixed bottom-6 right-6 z-50">
  <button
    id="dark-toggle"
    aria-label="Toggle Dark Mode"
    class="w-12 h-12 flex items-center justify-center text-xl rounded-full shadow-md bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-white transition hover:scale-110"
  >
    <i class="fas fa-moon dark:hidden"></i>
    <i class="fas fa-sun hidden dark:inline"></i>
  </button>
</div>

<script>
  if (typeof window !== "undefined") {
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "dark") {
      document.documentElement.classList.add("dark");
    } else if (savedTheme === "light") {
      document.documentElement.classList.remove("dark");
    } else {
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      if (prefersDark) {
        document.documentElement.classList.add("dark");
      }
    }

    window.addEventListener("DOMContentLoaded", () => {
      const toggleBtn = document.getElementById("dark-toggle");
      if (toggleBtn) {
        toggleBtn.addEventListener("click", () => {
          const html = document.documentElement;
          const isDark = html.classList.toggle("dark");
          localStorage.setItem("theme", isDark ? "dark" : "light");
        });
      }
    });
  }
</script>
